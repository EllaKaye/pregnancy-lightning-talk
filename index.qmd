---
title: Birthing the pregnancy package
author: Ella Kaye
date: 2025-09-17
date-format: long
footer: <https://ellakaye.github.io/pregnancy-lightning-talk>
format: 
    revealjs:
        theme: custom.scss
        highlight-style: ek-light.theme
execute:
    echo: true
    message: true
    warning: true
    error: true
---

```{r setup}
#| echo: false
options(crayon.enabled = TRUE)

ansi_aware_handler <- function(x, options) {
    paste0(
        "<pre class=\"r-output\"><code>",
        fansi::sgr_to_html(x = x, warn = FALSE, term.cap = "256"),
        "</code></pre>"
    )
}

knitr::knit_hooks$set(
    output = ansi_aware_handler, 
    message = ansi_aware_handler, 
    warning = ansi_aware_handler,
    error = ansi_aware_handler
)
```

# {.center .center-h .larger175}

The pregnancy package [exists]{.pink}


# {.center .center-h .larger175}

useful to [you]{.green} â†’ useful to [others]{.lime}

. . .

The value of [easy]{.blue} and [personal]{.orange}

. . . 

[tips]{.pink} and [tricks]{.purple}

. . .

## How it started...


```{.r}
how_far()
```
. . . 

```
I am 15 weeks and 5 days pregnant.
All going well, I am due in 24 weeks and 2 days.
(That's 91 injections down, 170 to go...)
```

## The 'obvious' solution

```{.r}
how_far(due_date = as.Date("2025-12-01"))
```

## But wouldn't this be better?

```{.r} 
how_far(due_date = NULL)
```

## It's possible...

```{.r}
due_date <- due_date %||%
    getOption("pregnancy.due_date") %||%
    date_abort(due_date)
```

## ...with guidance...

```{r}
#| echo: false
#| output: false
library(pregnancy)
set_due_date(NULL)
```

```{r}
#| output-location: fragment
library(pregnancy)
how_far()
```


## ...and helper functions 

```{r}
#| output-location: fragment
set_due_date(as.Date("2025-12-01"))
```

## Now we're good!

```{r}
#| output-location: fragment
how_far()
```

# {.center .center-h .larger175}

`options` and `%||%`

. . .

[helper functions]{.pink}

. . .

[**cli**]{.blue} and [**rlang**]{.blue}





# [Make your package a pleasure to use]{.pink} {.center .center-h .larger125}


# {.center-h}

![](images/pregnancy-hex.png)

[[ellakaye.github.io/pregnany](https://ellakaye.github.io/pregnancy)]{.larger175}